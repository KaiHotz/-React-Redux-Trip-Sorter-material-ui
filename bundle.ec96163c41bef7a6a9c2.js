!function(e){function t(t){for(var a,o,c=t[0],l=t[1],i=t[2],d=0,p=[];d<c.length;d++)o=c[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,c=1;c<r.length;c++){var l=r[c];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={1:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=l;s.push([413,0,3]),r()}({118:function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return i}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return d}),r.d(t,"b",function(){return p});var a=r(402),n=r.n(a),s=r(403),o=r.n(s),c=r(30);const l=o.a.resolve(e,"/mockedData/response.json"),i=()=>e=>n.a.get(l).then(t=>{e({type:c.a,payload:t.data})}).catch(e=>{throw e}),u=(e,t)=>(r,a)=>{const{data:{deals:n}}=a(),s=null===n||void 0===n?void 0:n.filter(r=>r.departure===e&&r.arrival===t);r({type:c.b,payload:s})},d=e=>t=>{t({type:e})},p=()=>e=>e({type:c.c})}).call(this,"/")},30:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return c});var a=r(91);const n="FETCH_DATA",s="SEARCH",o="SEARCH_RESET",c=Object(a.a)("SORT_BY",["COST","DURATION"])},413:function(e,t,r){r(414),e.exports=r(976)},91:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"c",function(){return n}),r.d(t,"a",function(){return s});const a=e=>e.reduce((e,t)=>e+(t.cost-t.cost*t.discount/100),0),n=e=>e.reduce((e,t)=>e+(60*parseInt(t.duration.h,10)+parseInt(t.duration.m,10)),0);function s(e,t=[]){return t.reduce((t,r)=>(t[r]=`${e}_${r}`,t),{})}},976:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(26),o=r.n(s),c=r(116),l=r(54),i=r(411),u=r.n(i),d=r(412),p=r.n(d),h=r(53),m=r(239),f=r(30);var b=r(243),v=r.n(b);const y={data:null,sorted:null};var S=Object(h.combineReducers)({data:(e={},t)=>{switch(t.type){case f.a:return t.payload;default:return e}},results:(e=y,t)=>{switch(t.type){case f.b:return{data:t.payload,sorted:null};case f.d.DURATION:return{data:v.a.sortBy(e.data,e=>60*parseInt(e.duration.h,10)+parseInt(e.duration.m,10)),sorted:t.type};case f.d.COST:return{data:v.a.sortBy(e.data,e=>e.cost-e.cost*e.discount/100),sorted:t.type};case f.c:return y;default:return e}}});var g=()=>{const e=h.compose;return Object(h.createStore)(S,e(Object(h.applyMiddleware)(m.default)))},O=r(117);var E=e=>(class extends a.Component{constructor(...e){super(...e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){const{error:t,errorInfo:r}=this.state;return n.a.createElement(a.Fragment,null,t&&n.a.createElement(a.Fragment,null,n.a.createElement("h2",null,"Something went wrong."),n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t.toString(),n.a.createElement("br",null),r.componentStack)),n.a.createElement(e,this.props))}}),j=r(3),w=r.n(j),R=r(60),C=r(409),T=r.n(C),x=r(410),B=r.n(x),I=r(241),P=r.n(I),$=r(162),D=r.n($),N=r(118);const A=e=>e.data,q=e=>e.results;var _=r(404),k=r.n(_),M=r(406),F=r.n(M),z=r(407),H=r.n(z);var U=e=>({card:{minWidth:275,maxWidth:350,margin:"0 auto",textAlign:"center"},title:{marginBottom:16},formControl:{margin:e.spacing.unit,minWidth:"95%"},sortButton:{width:"48%",margin:`${e.spacing.unit}px 2px`},searchResetButton:{width:"98%"},listItem:{textAlign:"center"}});const W=({label:e,selectedOption:t,onChange:r,options:a,classes:s,disabled:o})=>n.a.createElement(k.a,{className:s.formControl},e&&n.a.createElement(F.a,{htmlFor:"age-native-simple"},e),n.a.createElement(H.a,{native:!0,value:t,onChange:r,disabled:o},n.a.createElement("option",{value:""}),a.map(e=>n.a.createElement("option",{key:e,value:e},e))));W.propTypes={label:w.a.string,disabled:w.a.bool,selectedOption:w.a.string,classes:w.a.object.isRequired,onChange:w.a.func.isRequired,options:w.a.array.isRequired},W.defaultProps={label:null,disabled:!1,selectedOption:""};var J=Object(l.withStyles)(U)(W),Y=r(240),G=r.n(Y),K=r(245),L=r.n(K),Q=r(246),V=r.n(Q),X=r(408),Z=r.n(X),ee=r(91);const te=({results:e,classes:t})=>n.a.createElement(G.a,null,e.map(e=>n.a.createElement(L.a,{className:t.listItem,key:e.reference},n.a.createElement(V.a,{primary:`${e.departure} > ${e.arrival} ${e.cost-e.cost*e.discount/100}€`,secondary:`${e.transport} ${e.reference} for ${e.duration.h}h${e.duration.m}m`}))),n.a.createElement(Z.a,null),n.a.createElement(L.a,{className:t.listItem},n.a.createElement(V.a,{primary:`Total ${Math.trunc(Object(ee.c)(e)/60)}h${Object(ee.c)(e)%60}m ${Object(ee.b)(e)}€`})));te.propTypes={results:w.a.array,classes:w.a.object.isRequired},te.defaultProps={results:[]};var re=Object(l.withStyles)(U)(te);function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ne extends a.Component{constructor(...e){super(...e),ae(this,"state",{departure:"",arrival:"",arrivals:[]}),ae(this,"handelDepartureSelect",()=>e=>{const{deals:t}=this.props,r=t.filter(t=>t.departure===e.target.value).reduce((e,t)=>(e.push(t.arrival),e),[]);this.setState({departure:e.target.value,arrivals:[...new Set(r)]})}),ae(this,"handleArrivalSelect",()=>e=>{this.setState({arrival:e.target.value})}),ae(this,"handleSearch",()=>{const{search:e}=this.props,{departure:t,arrival:r}=this.state;e(t,r)}),ae(this,"handleSort",e=>()=>{const{sortBy:t}=this.props;t(e)}),ae(this,"handleReset",()=>{const{resetSearch:e}=this.props;this.setState({departure:"",arrival:"",arrivals:[]}),e()})}componentDidMount(){const{fetchData:e}=this.props;e()}render(){const{cities:e,classes:t,results:r,sorted:a}=this.props,{departure:s,arrival:o,arrivals:c}=this.state,{COST:l,DURATION:i}=f.d,u=r?this.handleReset:this.handleSearch,d=r?"Reset":"Search",p=r?"primary":"secondary";return n.a.createElement(T.a,{className:t.card},n.a.createElement(B.a,null,n.a.createElement(P.a,{className:t.title,variant:"display3",gutterBottom:!0},"Trip Sorter"),n.a.createElement(J,{label:"From:",onChange:this.handelDepartureSelect(),options:e,selectedOption:s,disabled:!!r}),n.a.createElement(J,{label:"To:",onChange:this.handleArrivalSelect(),options:c,selectedOption:o,disabled:!!r}),n.a.createElement(D.a,{className:t.sortButton,size:"small",color:"primary",variant:a===l?"contained":"outlined",onClick:this.handleSort(l),disabled:!r},"Cheapest"),n.a.createElement(D.a,{className:t.sortButton,size:"small",color:"primary",variant:a===i?"contained":"outlined",onClick:this.handleSort(i),disabled:!r},"Fastest"),n.a.createElement("div",{className:"results"},r&&n.a.createElement(re,{results:r}),n.a.createElement(D.a,{className:t.searchResetButton,size:"small",color:p,variant:"contained",onClick:u},d))))}}ae(ne,"propTypes",{deals:w.a.array,cities:w.a.array,results:w.a.array,sorted:w.a.string,fetchData:w.a.func.isRequired,search:w.a.func.isRequired,sortBy:w.a.func.isRequired,resetSearch:w.a.func.isRequired,classes:w.a.object.isRequired}),ae(ne,"defaultProps",{deals:[],cities:[],results:null,sorted:null});const se=Object(R.createStructuredSelector)({deals:Object(R.createSelector)(A,e=>e.deals),cities:Object(R.createSelector)(A,e=>{var t;return null===e||void 0===e?void 0:null===(t=e.deals)||void 0===t?void 0:t.reduce((e,t)=>(e.push(t.departure,t.arrival),[...new Set(e)].sort()),[])}),results:Object(R.createSelector)(q,e=>e.data),sorted:Object(R.createSelector)(q,e=>e.sorted)});var oe=Object(O.compose)(Object(c.connect)(se,{fetchData:N.a,search:N.c,sortBy:N.d,resetSearch:N.b}),Object(l.withStyles)(U))(ne);var ce=Object(O.compose)(E)(()=>n.a.createElement(oe,null));const le=g(),ie=Object(l.createMuiTheme)({palette:{primary:u.a,secondary:p.a},status:{danger:"orange"}});(e=>{o.a.render(n.a.createElement(c.Provider,{store:le},n.a.createElement(l.MuiThemeProvider,{theme:ie},n.a.createElement(e,null))),document.querySelector(".container"))})(ce)}});