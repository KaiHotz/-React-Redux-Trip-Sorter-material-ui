!function(e){function t(t){for(var r,l,o=t[0],i=t[1],c=t[2],d=0,p=[];d<o.length;d++)l=o[d],n[l]&&p.push(n[l][0]),n[l]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var i=a[o];0!==n[i]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={1:0},s=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=i;s.push([412,0,3]),a()}({157:function(e,t,a){"use strict";a.d(t,"a",function(){return r});const r="FETCH_DATA"},400:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});var r=a(401),n=a.n(r),s=a(402),l=a.n(s),o=a(157);const i=l.a.resolve(e,"/mockedData/response.json"),c=()=>e=>n.a.get(i).then(t=>{e({type:o.a,payload:t.data})}).catch(e=>{throw e})}).call(this,"/")},412:function(e,t,a){a(413),e.exports=a(975)},975:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(26),l=a.n(s),o=a(114),i=a(53),c=a(410),u=a.n(c),d=a(411),p=a.n(d),m=a(52),h=a(237),f=a(157);var v=Object(m.combineReducers)({data:(e={},t)=>{switch(t.type){case f.a:return t.payload;default:return e}}});var b=()=>{const e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.compose;return Object(m.createStore)(v,e(Object(m.applyMiddleware)(h.default)))},y=a(115);var g=e=>(class extends r.Component{constructor(...e){super(...e),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){const{error:t,errorInfo:a}=this.state;return n.a.createElement(r.Fragment,null,t&&n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Something went wrong."),n.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},t.toString(),n.a.createElement("br",null),a.componentStack)),n.a.createElement(e,this.props))}}),S=a(3),E=a.n(S),O=a(89),j=a(242),w=a.n(j),C=a(408),P=a.n(C),T=a(409),_=a.n(T),x=a(239),B=a.n(x),R=a(160),k=a.n(R),D=a(400);const I=e=>e.data;var N=a(403),$=a.n(N),M=a(405),q=a.n(M),A=a(406),F=a.n(A);var z=e=>({card:{minWidth:275,maxWidth:350,margin:"0 auto",textAlign:"center"},title:{marginBottom:16},formControl:{margin:e.spacing.unit,minWidth:"95%"},sortButton:{width:"48%",margin:`${e.spacing.unit}px 2px`},searchResetButton:{width:"98%"},listItem:{textAlign:"center"}});const W=({label:e,selectedOption:t,onChange:a,options:r,classes:s,disabled:l})=>n.a.createElement($.a,{className:s.formControl},e&&n.a.createElement(q.a,{htmlFor:"age-native-simple"},e),n.a.createElement(F.a,{native:!0,value:t,onChange:a,disabled:l},n.a.createElement("option",{value:""}),r.map(e=>n.a.createElement("option",{key:e,value:e},e))));W.propTypes={label:E.a.string,disabled:E.a.bool,selectedOption:E.a.string,classes:E.a.object.isRequired,onChange:E.a.func.isRequired,options:E.a.array.isRequired},W.defaultProps={label:null,disabled:!1,selectedOption:""};var J=Object(i.withStyles)(z)(W),X=a(238),H=a.n(X),L=a(243),U=a.n(L),V=a(244),G=a.n(V),K=a(407),Q=a.n(K);const Y=e=>e.reduce((e,t)=>e+(60*parseInt(t.duration.h,10)+parseInt(t.duration.m,10)),0),Z=({results:e,classes:t})=>n.a.createElement(H.a,null,e.map(e=>n.a.createElement(U.a,{className:t.listItem,key:e.reference},n.a.createElement(G.a,{primary:`${e.departure} > ${e.arrival} ${e.cost-e.cost*e.discount/100}€`,secondary:`${e.transport} ${e.reference} for ${e.duration.h}h${e.duration.m}m`}))),n.a.createElement(Q.a,null),n.a.createElement(U.a,{className:t.listItem},n.a.createElement(G.a,{primary:`Total ${Math.trunc(Y(e)/60)}h${Y(e)%60}m ${(e=>e.reduce((e,t)=>e+(t.cost-t.cost*t.discount/100),0))(e)}€`})));Z.propTypes={results:E.a.array,classes:E.a.object.isRequired},Z.defaultProps={results:[]};var ee=Object(i.withStyles)(z)(Z);function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ae extends r.Component{constructor(...e){super(...e),te(this,"state",{departure:"",arrival:"",arrivals:[],results:null,sortBy:null}),te(this,"handelDepartureSelect",()=>e=>{const{deals:t}=this.props,a=t.filter(t=>t.departure===e.target.value).reduce((e,t)=>(e.push(t.arrival),e),[]);this.setState({departure:e.target.value,arrivals:[...new Set(a)]})}),te(this,"handleArrivalSelect",()=>e=>{this.setState({arrival:e.target.value})}),te(this,"handleSearch",()=>{const{deals:e}=this.props,{departure:t,arrival:a}=this.state,r=e.filter(e=>e.departure===t&&e.arrival===a);this.setState({results:r})}),te(this,"handleSort",e=>()=>{const{results:t}=this.state;let a;switch(e){case"cost":a=w.a.sortBy(t,e=>e.cost-e.cost*e.discount/100);break;case"duration":a=w.a.sortBy(t,e=>60*parseInt(e.duration.h,10)+parseInt(e.duration.m,10));break;default:return}this.setState({results:a,sortBy:e})}),te(this,"handleReset",()=>{this.setState({departure:"",arrival:"",arrivals:[],results:null,sortBy:null})})}componentDidMount(){const{fetchData:e}=this.props;e()}render(){const{cities:e,classes:t}=this.props,{departure:a,arrival:r,arrivals:s,sortBy:l,results:o}=this.state,i=o?this.handleReset:this.handleSearch,c=o?"Reset":"Search",u=o?"primary":"secondary";return n.a.createElement(P.a,{className:t.card},n.a.createElement(_.a,null,n.a.createElement(B.a,{className:t.title,variant:"display3",gutterBottom:!0},"Trip Sorter"),n.a.createElement(J,{label:"From:",onChange:this.handelDepartureSelect(),options:e,selectedOption:a,disabled:!!o}),n.a.createElement(J,{label:"To:",onChange:this.handleArrivalSelect(),options:s,selectedOption:r,disabled:!!o}),n.a.createElement(k.a,{className:t.sortButton,size:"small",color:"primary",variant:"cost"===l?"contained":"outlined",onClick:this.handleSort("cost"),disabled:null===o},"Cheapest"),n.a.createElement(k.a,{className:t.sortButton,size:"small",color:"primary",variant:"duration"===l?"contained":"outlined",onClick:this.handleSort("duration"),disabled:null===o},"Fastest"),n.a.createElement("div",{className:"results"},o&&n.a.createElement(ee,{results:o}),n.a.createElement(k.a,{className:t.searchResetButton,size:"small",color:u,variant:"contained",onClick:i},c))))}}te(ae,"propTypes",{deals:E.a.array,cities:E.a.array,fetchData:E.a.func.isRequired,classes:E.a.object.isRequired}),te(ae,"defaultProps",{deals:[],cities:[]});const re=Object(O.createStructuredSelector)({deals:Object(O.createSelector)(I,e=>e.deals),cities:Object(O.createSelector)(I,e=>{var t;return null===e||void 0===e?void 0:null===(t=e.deals)||void 0===t?void 0:t.reduce((e,t)=>(e.push(t.departure,t.arrival),[...new Set(e)].sort()),[])})});var ne=Object(y.compose)(Object(o.connect)(re,{fetchData:D.a}),Object(i.withStyles)(z))(ae);var se=Object(y.compose)(g)(()=>n.a.createElement(ne,null));const le=b(),oe=Object(i.createMuiTheme)({palette:{primary:u.a,secondary:p.a},status:{danger:"orange"}});(e=>{l.a.render(n.a.createElement(o.Provider,{store:le},n.a.createElement(i.MuiThemeProvider,{theme:oe},n.a.createElement(e,null))),document.querySelector(".container"))})(se)}});